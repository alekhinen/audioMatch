#!/usr/bin/env python

# @authors: Nick Alekhine, Michael Chadbourne, John Meenagh, Charles Perrone
# @description: Designed to identify files in one directory with matching
#               segments in the other.
# @version: 06-11-2014

# -----------------------------------------------------------------------------
# imports

import sys
import shutil
from src.recordings.database import RecordingsDatabase
from parser    import parse
from validator import validate
from adder     import add
from checker   import check
from logger    import log

# -----------------------------------------------------------------------------
# initialize all necessary components
ocore = OperationsCore(2.5, 75000)
database = RecordingsDatabase()


# -----------------------------------------------------------------------------
# Main function, acts based upon OCore['Mode']

# Parse the CLI arguments.
parsedArgs = parse( sys.argv )
# Validate the parsed arguments.
validate( parsedArgs )
# Set the validated, parsed arguments inside ocore.
ocore.setArguments( parsedArgs )

output = add(OCore)
log(output)
output = check(OCore)
log(output)

# clean up temporary directory
shutil.rmtree('./tmp/')
